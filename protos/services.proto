syntax = "proto3";

message VisionClassificationGetModelsReq {}

message VisionClassificationGetModelsResp {
  repeated string models = 1;
}


message VisionClassificationRequest {
  string input_image = 1;
  uint32 num_returns = 2;

  string model_name = 3;
}

message VisionClassificationResponse {
  message Result {
    uint32 rank = 1;
    string category = 2;
    float proba = 3;
  }

  repeated Result results = 1;
}

message ImageDownloadRequest {
  string url = 1;
}
message ImageDownloadResponse {
  string image = 1;
}

service Model {
  rpc VisionClassification(VisionClassificationRequest)
      returns (VisionClassificationResponse) {}

  rpc GetImage(ImageDownloadRequest) returns (ImageDownloadResponse) {}
  rpc ListModels(VisionClassificationGetModelsReq) returns (VisionClassificationGetModelsResp) {}
  
}
